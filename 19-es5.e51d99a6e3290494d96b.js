function _construct(e,t,n){return(_construct=_isNativeReflectConstruct()?Reflect.construct:function(e,t,n){var i=[null];i.push.apply(i,t);var r=new(Function.bind.apply(e,i));return n&&_setPrototypeOf(r,n.prototype),r}).apply(null,arguments)}function _get(e,t,n){return(_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=_superPropBase(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function _superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_getPrototypeOf(e)););return e}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _createSuper(e){var t=_isNativeReflectConstruct();return function(){var n,i=_getPrototypeOf(e);if(t){var r=_getPrototypeOf(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return _possibleConstructorReturn(this,n)}}function _possibleConstructorReturn(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?_assertThisInitialized(e):t}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{"99Un":function(e,t,n){"use strict";n.r(t),n.d(t,"HomePageModule",(function(){return Te}));var i=n("ofXK"),r=n("3Pt+"),o=n("TEn/"),s=n("tyNb"),c=n("66A4"),a=n("R0Ic"),u=n("nYR2"),l=n("128B"),h=n("lJxs"),b=n("xbPD"),f=n("XNiG"),g=n("l7GE"),p=n("ZUHj"),d=function(){function e(t,n){_classCallCheck(this,e),this.notifier=t,this.source=n}return _createClass(e,[{key:"call",value:function(e,t){return t.subscribe(new m(e,this.notifier,this.source))}}]),e}(),m=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i,r){var o;return _classCallCheck(this,n),(o=t.call(this,e)).notifier=i,o.source=r,o}return _createClass(n,[{key:"error",value:function(e){if(!this.isStopped){var t=this.errors,i=this.retries,r=this.retriesSubscription;if(i)this.errors=null,this.retriesSubscription=null;else{t=new f.a;try{i=(0,this.notifier)(t)}catch(o){return _get(_getPrototypeOf(n.prototype),"error",this).call(this,o)}r=Object(p.a)(this,i)}this._unsubscribeAndRecycle(),this.errors=t,this.retries=i,this.retriesSubscription=r,t.next(e)}}},{key:"_unsubscribe",value:function(){var e=this.errors,t=this.retriesSubscription;e&&(e.unsubscribe(),this.errors=null),t&&(t.unsubscribe(),this.retriesSubscription=null),this.retries=null}},{key:"notifyNext",value:function(e,t,n,i,r){var o=this._unsubscribe;this._unsubscribe=null,this._unsubscribeAndRecycle(),this._unsubscribe=o,this.source.subscribe(this)}}]),n}(g.a),v=n("pLZG"),y=n("3E0/"),_=n("Cfvw"),w=n("fXoL"),C=n("tudd"),k=n("Witw"),O=["buttomScroll"];function x(e,t){1&e&&(w.Mb(0,"ion-item"),w.Mb(1,"ion-thumbnail",13),w.Kb(2,"ion-skeleton-text",14),w.Lb(),w.Mb(3,"ion-label"),w.Mb(4,"h3"),w.Kb(5,"ion-skeleton-text",15),w.Lb(),w.Mb(6,"p"),w.Kb(7,"ion-skeleton-text",16),w.Lb(),w.Mb(8,"p"),w.Kb(9,"ion-skeleton-text",17),w.Lb(),w.Lb(),w.Lb())}var P=function(){return[1,1,1,1,1,1,1,1,1]};function I(e,t){1&e&&(w.Mb(0,"ion-col",11),w.ic(1,x,10,0,"ion-item",12),w.Lb()),2&e&&(w.zb(1),w.Zb("ngForOf",w.ac(1,P)))}function S(e,t){if(1&e&&(w.Mb(0,"ion-col",11),w.Kb(1,"app-hitem",18),w.Lb()),2&e){var n=t.$implicit;w.zb(1),w.Zb("hitem",n)}}var M,j,L,z=((M=function(){function e(t,n){_classCallCheck(this,e),this.sys=t,this.uiService=n,this.showTopAlert=!1,this.topAlertText="",this.hitemList=new Array}return _createClass(e,[{key:"ngOnInit",value:function(){this.loadHitem()}},{key:"updateHitem",value:function(e){var t=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];null!=e&&(this.topAlertText=0==e.length?"\u6ca1\u6709\u66f4\u65b0":"\u66f4\u65b0".concat(e.length,"\u6761"),this.showTopAlert=!0,e.forEach((function(e){var i=new c.a(t.sys);console.debug(i.id),Object.assign(i,e),n?t.hitemList.push(i):t.hitemList.splice(0,0,i)})),setTimeout((function(){t.showTopAlert=!1}),1500))}},{key:"pullHitem",value:function(e){var t,n=this,i=0;this.hitemList.forEach((function(e,t){i=e.ctime>i?e.ctime:i})),t="?ctime=".concat(i),this.sys.fetch("/hweb/timeline/pull/".concat(t)).pipe(Object(u.a)((function(){e.target.complete()}))).subscribe({next:function(e){n.updateHitem(e,!1)}})}},{key:"loadHitem",value:function(e){var t=this;Object(_.a)(this.hitemList).pipe(Object(l.a)((function(e,t){return function(e,t){return e.ctime>t.ctime?e.ctime:t.ctime}(e,t)<0?e:t})),Object(h.a)((function(e){return e.ctime})),Object(b.a)(0)).subscribe((function(e){var n;t.sys.fetch("/hweb/timeline/push/?ctime=".concat(e)).pipe(Object(u.a)((function(){t.buttomScroll.complete()})),(n=function(e){return e.pipe(Object(v.a)((function(e){return 0==t.hitemList.length})),Object(y.a)(2e4))},function(e){return e.lift(new d(n,e))})).subscribe({next:function(e){t.updateHitem(e)}})}))}}]),e}()).\u0275fac=function(e){return new(e||M)(w.Jb(C.a),w.Jb(k.a))},M.\u0275cmp=w.Db({type:M,selectors:[["app-home"]],viewQuery:function(e,t){var n;1&e&&w.hc(O,!0),2&e&&w.bc(n=w.Vb())&&(t.buttomScroll=n.first)},decls:17,vars:4,consts:[[1,"main-content"],["content",""],["slot","fixed","pullMin","100",3,"ionRefresh"],["refresher",""],[1,"refresh-alert"],[1,"info-card","bg-danger"],["size","12",4,"ngIf"],["size","12",4,"ngFor","ngForOf"],["threshold","20px",3,"ionInfinite"],["buttomScroll",""],[1,"bottom-line"],["size","12"],[4,"ngFor","ngForOf"],["slot","start"],["animated",""],["animated","",2,"width","50%"],["animated","",2,"width","90%"],["animated","",2,"width","60%"],[3,"hitem"]],template:function(e,t){1&e&&(w.Mb(0,"ion-content",0,1),w.Mb(2,"ion-refresher",2,3),w.Ub("ionRefresh",(function(e){return t.pullHitem(e)})),w.Kb(4,"ion-refresher-content"),w.Lb(),w.Mb(5,"div",4),w.jc(6),w.Lb(),w.Mb(7,"div",5),w.jc(8," \u672c\u7ad9\u5efa\u8bae\u4f7f\u7528 Chrome(\u8c37\u6b4c\u6d4f\u89c8\u5668),Safari(\u82f9\u679c\u6d4f\u89c8\u5668),Firefox(\u706b\u72d0\u6d4f\u89c8\u5668) \u6d4f\u89c8\uff0c\u4ee5\u83b7\u5f97\u6700\u597d\u7684\u4f53\u9a8c\u3002 "),w.Lb(),w.Mb(9,"ion-grid"),w.Mb(10,"ion-row"),w.ic(11,I,2,2,"ion-col",6),w.ic(12,S,2,1,"ion-col",7),w.Lb(),w.Lb(),w.Mb(13,"ion-infinite-scroll",8,9),w.Ub("ionInfinite",(function(e){return t.loadHitem(e)})),w.Mb(15,"div",10),w.jc(16,"\u4f60\u5df2\u89e6\u53ca\u5230\u6211\u7684\u5e95\u7ebf"),w.Lb(),w.Lb(),w.Lb()),2&e&&(w.zb(5),w.Zb("@topAlert",t.showTopAlert?"show":"dismiss"),w.zb(1),w.kc(t.topAlertText),w.zb(5),w.Zb("ngIf",0==t.hitemList.length),w.zb(1),w.Zb("ngForOf",t.hitemList))},directives:[o.s,o.Y,o.Z,o.y,o.eb,i.t,i.s,o.C,o.r,o.F,o.ub,o.kb,o.L,c.b],styles:[".main-content[_ngcontent-%COMP%]{--ion-background-color:#efefef}.h-message[_ngcontent-%COMP%]{background-color:#00adff;color:#fff;font-weight:600;padding:15px}ion-progress-bar[_ngcontent-%COMP%]{margin:10px 0}.refresh-alert[_ngcontent-%COMP%]{position:fixed;background-color:orange;color:#fff;font-weight:500;padding:5px;z-index:10}.bottom-line[_ngcontent-%COMP%], .refresh-alert[_ngcontent-%COMP%]{text-align:center;width:100%}.bottom-line[_ngcontent-%COMP%]{padding-bottom:15px;color:grey;font-weight:700}.info-card[_ngcontent-%COMP%]{margin:10px;padding:10px;color:#fff;font-weight:700;font-size:14px}.bg-danger[_ngcontent-%COMP%]{background-color:var(--ion-color-danger)}.bg-success[_ngcontent-%COMP%]{background-color:var(--ion-color-primary)}"],data:{animation:[Object(a.j)("topAlert",[Object(a.g)("show",Object(a.h)({opacity:1})),Object(a.g)("dismiss",Object(a.h)({opacity:0})),Object(a.i)("show=>dismiss",[Object(a.e)("0.2s")]),Object(a.i)("dismiss=>show",[Object(a.e)("0.2s")])])]}}),M),A=[{path:"",component:z}],E=((j=function e(){_classCallCheck(this,e)}).\u0275mod=w.Hb({type:j}),j.\u0275inj=w.Gb({factory:function(e){return new(e||j)},imports:[[s.k.forChild(A)],s.k]}),j),T=n("G4NA"),N=n("GU7r"),R=["articleContent"],F=((L=function(){function e(t,n,i){_classCallCheck(this,e),this.observer=t,this.elementRef=n,this.ui=i}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.observer.observe(this.articleContent.nativeElement).subscribe((function(t){e.elementRef.nativeElement.querySelectorAll("img.h-img").forEach((function(t,n){var i=e.ui.getUrlFromSource(t.alt);t.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAIAAACQd1PeAAAADElEQVR4nGP48P8DAAXCAuBwCbJVAAAAAElFTkSuQmCC",t.removeAttribute("alt"),t.style.width="100%",t.style.height="30px",e.ui.onInScreen(t).subscribe({complete:function(){t.src=i,t.style.height="100%",t.style.border="1px solid #eeeeee"}})}))}))}},{key:"ngAfterViewInit",value:function(){}}]),e}()).\u0275fac=function(e){return new(e||L)(w.Jb(N.a),w.Jb(w.l),w.Jb(k.a))},L.\u0275cmp=w.Db({type:L,selectors:[["app-article"]],viewQuery:function(e,t){var n;1&e&&w.hc(R,!0),2&e&&w.bc(n=w.Vb())&&(t.articleContent=n.first)},inputs:{content:"content"},decls:2,vars:1,consts:[[1,"article",3,"innerHTML"],["articleContent",""]],template:function(e,t){1&e&&w.Kb(0,"div",0,1),2&e&&w.Zb("innerHTML",t.content,w.dc)},styles:[".article[_ngcontent-%COMP%]{margin:10px;padding:10px;font-size:14px;border:1px solid #e1e1e1}"]}),L),J=n("qubv");function H(e,t){if(1&e&&(w.Mb(0,"ion-col",2),w.Kb(1,"ion-img",3),w.Lb()),2&e){var n=t.$implicit,i=w.Wb();w.Zb("size",i.colSize),w.zb(1),w.Zb("src",i.getImgUrl(n))}}var Z,B=((Z=function(){function e(t,n,i,r,o){_classCallCheck(this,e),this.elementRef=t,this.ui=n,this.platform=i,this.router=r,this.playService=o,this.isPreview=!0,this.colSize=3,this.thumbCount=4}return _createClass(e,[{key:"ngOnInit",value:function(){var e;this.thumbCount=this.platform.is("desktop")?6:(e=[1,2,3])[Math.floor(Math.random()*e.length)],window.innerWidth>600&&(this.thumbCount=4),this.colSize=12/this.thumbCount,this.thumbs=this.hitem.imgs.slice(0,this.thumbCount)}},{key:"ngAfterViewInit",value:function(){}},{key:"viewArticle",value:function(){this.playService.pageHitem$.next(this.hitem),this.router.navigate(["hitem",this.hitem.id])}},{key:"getImgUrl",value:function(e){var t="mini";return 1==this.thumbCount&&(t=void 0),this.ui.getUrlFromSource(e,t)}}]),e}()).\u0275fac=function(e){return new(e||Z)(w.Jb(w.l),w.Jb(k.a),w.Jb(o.Db),w.Jb(s.g),w.Jb(J.a))},Z.\u0275cmp=w.Db({type:Z,selectors:[["app-article-preview"]],viewQuery:function(e,t){var n;1&e&&w.mc(o.B,!0),2&e&&w.bc(n=w.Vb())&&(t.ionImgs=n)},inputs:{hitem:"hitem"},decls:3,vars:1,consts:[[3,"click"],["class","thumb",3,"size",4,"ngFor","ngForOf"],[1,"thumb",3,"size"],[3,"src"]],template:function(e,t){1&e&&(w.Mb(0,"ion-grid"),w.Mb(1,"ion-row",0),w.Ub("click",(function(){return t.viewArticle()})),w.ic(2,H,2,2,"ion-col",1),w.Lb(),w.Lb()),2&e&&(w.zb(2),w.Zb("ngForOf",t.thumbs))},directives:[o.y,o.eb,i.s,o.r,o.B],styles:["ion-row[_ngcontent-%COMP%]{background-color:#eee}.thumb[_ngcontent-%COMP%]{margin:auto}"]}),Z);function D(e,t){if(1&e&&w.Kb(0,"img",12),2&e){var n=t.$implicit,i=w.Wb(2);w.Zb("src",i.getImgUrl(n),w.ec)}}function V(e,t){if(1&e&&(w.Mb(0,"div"),w.Mb(1,"div",10),w.ic(2,D,1,1,"img",11),w.Lb(),w.Lb()),2&e){var n=w.Wb();w.zb(2),w.Zb("ngForOf",n.hitem.photos)}}function W(e,t){if(1&e&&(w.Mb(0,"div",13),w.Kb(1,"app-video",14),w.Lb()),2&e){var n=w.Wb();w.zb(1),w.Zb("src",n.getVideoSrc())("thumbSrc",n.getPoster())}}var K,G=((K=function(){function e(t){_classCallCheck(this,e),this.sys=t}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"getAvatar",value:function(){return"".concat(this.sys.staticPrefix,"/tweet/avatar-").concat(this.hitem.username,".jpg")}},{key:"getImgUrl",value:function(e){return"".concat(this.sys.staticPrefix).concat(e)}},{key:"getPoster",value:function(){return"".concat(this.sys.staticPrefix,"/").concat(this.hitem.thumb)}},{key:"getVideoSrc",value:function(){return"".concat(this.sys.staticPrefix,"/hls/").concat(this.hitem.src)}}]),e}()).\u0275fac=function(e){return new(e||K)(w.Jb(C.a))},K.\u0275cmp=w.Db({type:K,selectors:[["app-tweet"]],inputs:{hitem:"hitem"},decls:16,vars:6,consts:[["size","12"],[1,"tw"],[1,"tw-head"],["alt","",3,"src"],[1,"tw-main"],[1,"tweet-name"],[1,"username"],[1,"tweet-text"],[4,"ngIf"],["class","tw-video",4,"ngIf"],[1,"tw-img"],[3,"src",4,"ngFor","ngForOf"],[3,"src"],[1,"tw-video"],[3,"src","thumbSrc"]],template:function(e,t){1&e&&(w.Mb(0,"ion-grid"),w.Mb(1,"ion-row"),w.Mb(2,"ion-col",0),w.Mb(3,"div",1),w.Mb(4,"div",2),w.Kb(5,"img",3),w.Lb(),w.Mb(6,"div",4),w.Mb(7,"div",5),w.jc(8),w.Mb(9,"span",6),w.jc(10),w.Lb(),w.Lb(),w.Mb(11,"div"),w.Mb(12,"p",7),w.jc(13),w.Lb(),w.Lb(),w.ic(14,V,3,1,"div",8),w.ic(15,W,2,2,"div",9),w.Lb(),w.Lb(),w.Lb(),w.Lb(),w.Lb()),2&e&&(w.zb(5),w.Zb("src",t.getAvatar(),w.ec),w.zb(3),w.lc("",t.hitem.name," "),w.zb(2),w.lc("@",t.hitem.username,""),w.zb(3),w.kc(t.hitem.tweet),w.zb(1),w.Zb("ngIf",t.hitem.photos),w.zb(1),w.Zb("ngIf",t.hitem.src))},directives:[o.y,o.eb,o.r,i.t,i.s,T.a],styles:[".tw[_ngcontent-%COMP%]{display:flex;flex-direction:row;padding:5px}.tw-head[_ngcontent-%COMP%]{margin:5px 0;flex-basis:55px;flex-grow:0}.tw-head[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:45px;border-radius:50%}.tw-main[_ngcontent-%COMP%]{flex-basis:0px;flex-grow:1;padding-right:5px}.tw-main[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border:1px solid #e1e1e1;border-radius:10px}.tweet-name[_ngcontent-%COMP%]{font-size:15px;font-weight:700}.tweet-name[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:var(--ion-color-medium)}.tweet-text[_ngcontent-%COMP%]{font-weight:400;font-size:15px;margin:0 0 15px}"]}),K),U=n("LRne"),q=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i){var r;return _classCallCheck(this,n),(r=t.call(this,e,i)).scheduler=e,r.work=i,r}return _createClass(n,[{key:"schedule",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t>0?_get(_getPrototypeOf(n.prototype),"schedule",this).call(this,e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}},{key:"execute",value:function(e,t){return t>0||this.closed?_get(_getPrototypeOf(n.prototype),"execute",this).call(this,e,t):this._execute(e,t)}},{key:"requestAsyncId",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return null!==i&&i>0||null===i&&this.delay>0?_get(_getPrototypeOf(n.prototype),"requestAsyncId",this).call(this,e,t,i):e.flush(this)}}]),n}(n("3N8a").a),Y=new(function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return n}(n("IjjT").a))(q),Q=n("quSY"),$=n("7o/Q"),X=n("WMd4"),ee=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i){var r,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return _classCallCheck(this,n),(r=t.call(this,e)).scheduler=i,r.delay=o,r}return _createClass(n,[{key:"scheduleMessage",value:function(e){this.destination.add(this.scheduler.schedule(n.dispatch,this.delay,new te(e,this.destination)))}},{key:"_next",value:function(e){this.scheduleMessage(X.a.createNext(e))}},{key:"_error",value:function(e){this.scheduleMessage(X.a.createError(e)),this.unsubscribe()}},{key:"_complete",value:function(){this.scheduleMessage(X.a.createComplete()),this.unsubscribe()}}],[{key:"dispatch",value:function(e){var t=e.notification,n=e.destination;t.observe(n),this.unsubscribe()}}]),n}($.a),te=function e(t,n){_classCallCheck(this,e),this.notification=t,this.destination=n},ne=n("9ppp"),ie=n("Ylt2"),re=function(e){_inherits(n,e);var t=_createSuper(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Number.POSITIVE_INFINITY,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.POSITIVE_INFINITY,o=arguments.length>2?arguments[2]:void 0;return _classCallCheck(this,n),(e=t.call(this)).scheduler=o,e._events=[],e._infiniteTimeWindow=!1,e._bufferSize=i<1?1:i,e._windowTime=r<1?1:r,r===Number.POSITIVE_INFINITY?(e._infiniteTimeWindow=!0,e.next=e.nextInfiniteTimeWindow):e.next=e.nextTimeWindow,e}return _createClass(n,[{key:"nextInfiniteTimeWindow",value:function(e){var t=this._events;t.push(e),t.length>this._bufferSize&&t.shift(),_get(_getPrototypeOf(n.prototype),"next",this).call(this,e)}},{key:"nextTimeWindow",value:function(e){this._events.push(new oe(this._getNow(),e)),this._trimBufferThenGetEvents(),_get(_getPrototypeOf(n.prototype),"next",this).call(this,e)}},{key:"_subscribe",value:function(e){var t,n=this._infiniteTimeWindow,i=n?this._events:this._trimBufferThenGetEvents(),r=this.scheduler,o=i.length;if(this.closed)throw new ne.a;if(this.isStopped||this.hasError?t=Q.a.EMPTY:(this.observers.push(e),t=new ie.a(this,e)),r&&e.add(e=new ee(e,r)),n)for(var s=0;s<o&&!e.closed;s++)e.next(i[s]);else for(var c=0;c<o&&!e.closed;c++)e.next(i[c].value);return this.hasError?e.error(this.thrownError):this.isStopped&&e.complete(),t}},{key:"_getNow",value:function(){return(this.scheduler||Y).now()}},{key:"_trimBufferThenGetEvents",value:function(){for(var e=this._getNow(),t=this._bufferSize,n=this._windowTime,i=this._events,r=i.length,o=0;o<r&&!(e-i[o].time<n);)o++;return r>t&&(o=Math.max(o,r-t)),o>0&&i.splice(0,o),i}}]),n}(f.a),oe=function e(t,n){_classCallCheck(this,e),this.time=t,this.value=n},se=n("5yfJ"),ce=n("HDdC"),ae=(n("EY2u"),n("vkgz")),ue=n("IzEk"),le=n("5+tZ"),he=n("JIr8"),be=n("eIep");function fe(e,t){e.className=e.className.replace(t,"")}function ge(e,t){e.className.includes(t)||(e.className+=" ".concat(t))}function pe(e){return Boolean(e.parentElement&&"picture"===e.parentElement.nodeName.toLowerCase())}function de(e){return"img"===e.nodeName.toLowerCase()}function me(e,t,n){return de(e)?n&&"srcset"in e?e.srcset=t:e.src=t:e.style.backgroundImage="url('".concat(t,"')"),e}function ve(e){return function(t){for(var n=t.parentElement.getElementsByTagName("source"),i=0;i<n.length;i++){var r=n[i].getAttribute(e);r&&("srcset"in n[i]?n[i].srcset=r:n[i].src=r)}}}n("JX91"),n("D0XW"),n("w1tV");var ye=ve("defaultImage"),_e=ve("lazyLoad"),we=ve("errorImage");function Ce(e){return function(t,n,i){de(t)&&pe(t)&&e(t),n&&me(t,n,i)}}var ke,Oe,xe,Pe,Ie,Se=Ce(ye),Me=Ce(_e),je=Ce(we),Le=((Oe=function(){function e(t,n,i,r){_classCallCheck(this,e),this.onStateChange=new w.n,this.elementRef=t,this.ngZone=n,this.propertyChanges$=new re,this.hooks=r,r.setPlatformId(i),this.uid=Math.random().toString(36).substr(2,9)}return _createClass(e,[{key:"ngOnChanges",value:function(){!0!==this.debug||this.debugSubscription||(this.debugSubscription=this.onStateChange.subscribe((function(e){return console.log(e)}))),this.propertyChanges$.next({element:this.elementRef.nativeElement,imagePath:this.lazyImage,defaultImagePath:this.defaultImage,errorImagePath:this.errorImage,useSrcset:this.useSrcset,offset:this.offset?0|this.offset:0,scrollContainer:this.scrollTarget,customObservable:this.customObservable,decode:this.decode,onStateChange:this.onStateChange,id:this.uid})}},{key:"ngAfterContentInit",value:function(){var e=this;if(this.hooks.isDisabled())return null;this.ngZone.runOutsideAngular((function(){e.loadSubscription=e.propertyChanges$.pipe(Object(ae.a)((function(t){return e.hooks.onAttributeChange(t)})),Object(ae.a)((function(e){return e.onStateChange.emit({reason:"setup"})})),Object(ae.a)((function(t){return e.hooks.setup(t)})),Object(be.a)((function(t){return t.imagePath?e.hooks.getObservable(t).pipe(function(e,t){return function(n){return n.pipe(Object(ae.a)((function(e){return t.onStateChange.emit({reason:"observer-emit",data:e})})),Object(v.a)((function(n){return e.isVisible(n,t)})),Object(ue.a)(1),Object(ae.a)((function(){return t.onStateChange.emit({reason:"start-loading"})})),Object(le.a)((function(){return e.loadImage(t)})),Object(ae.a)((function(){return t.onStateChange.emit({reason:"mount-image"})})),Object(ae.a)((function(n){return e.setLoadedImage(n,t)})),Object(ae.a)((function(){return t.onStateChange.emit({reason:"loading-succeeded"})})),Object(h.a)((function(){return!0})),Object(he.a)((function(n){return t.onStateChange.emit({reason:"loading-failed",data:n}),e.setErrorImage(n,t),Object(U.a)(!1)})),Object(ae.a)((function(){t.onStateChange.emit({reason:"finally"}),e.finally(t)})))}}(e.hooks,t)):Object(se.b)()}))).subscribe({next:function(){return null}})}))}},{key:"ngOnDestroy",value:function(){var e,t,n=this;this.propertyChanges$.pipe(Object(ue.a)(1)).subscribe({next:function(e){return n.hooks.onDestroy(e)}}).unsubscribe(),null===(e=this.loadSubscription)||void 0===e||e.unsubscribe(),null===(t=this.debugSubscription)||void 0===t||t.unsubscribe()}}]),e}()).\u0275fac=function(e){return new(e||Oe)(w.Jb(w.l),w.Jb(w.z),w.Jb(w.B),w.Jb("LazyLoadImageHooks"))},Oe.\u0275dir=w.Eb({type:Oe,selectors:[["","lazyLoad",""]],inputs:{lazyImage:["lazyLoad","lazyImage"],defaultImage:"defaultImage",errorImage:"errorImage",scrollTarget:"scrollTarget",customObservable:"customObservable",offset:"offset",useSrcset:"useSrcset",decode:"decode",debug:"debug"},outputs:{onStateChange:"onStateChange"},features:[w.xb]}),Oe),ze=((ke=function(e){_inherits(n,e);var t=_createSuper(n);function n(){var e;return _classCallCheck(this,n),(e=t.apply(this,arguments)).observers=new WeakMap,e.intersectionSubject=new f.a,e.uniqKey={},e}return _createClass(n,[{key:"getObservable",value:function(e){var t=this;if(this.skipLazyLoading())return Object(U.a)({isIntersecting:!0});if(e.customObservable)return e.customObservable;var n=e.scrollContainer||this.uniqKey,i={root:e.scrollContainer||null};e.offset&&(i.rootMargin="".concat(e.offset,"px"));var r=this.observers.get(n);return r||(r=new IntersectionObserver((function(e){return t.loadingCallback(e)}),i),this.observers.set(n,r)),r.observe(e.element),ce.a.create((function(n){var i=t.intersectionSubject.pipe(Object(v.a)((function(t){return t.target===e.element}))).subscribe(n);return function(){i.unsubscribe(),r.unobserve(e.element)}}))}},{key:"isVisible",value:function(e){return e.isIntersecting}},{key:"loadingCallback",value:function(e){var t=this;e.forEach((function(e){return t.intersectionSubject.next(e)}))}}]),n}(function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"setup",value:function(e){var t;Se(e.element,e.defaultImagePath,e.useSrcset),ge(e.element,"ng-lazyloading"),(t=e.element).className&&t.className.includes("ng-lazyloaded")&&fe(e.element,"ng-lazyloaded")}},{key:"finally",value:function(e){ge(e.element,"ng-lazyloaded"),fe(e.element,"ng-lazyloading")}},{key:"loadImage",value:function(e){if(this.skipLazyLoading())return[e.imagePath];var t,n=e.element,i=e.useSrcset,r=e.imagePath,o=e.decode;if(de(n)&&pe(n)){var s=n.parentNode.cloneNode(!0);t=s.getElementsByTagName("img")[0],_e(t),me(t,r,i)}else t=new Image,de(n)&&n.referrerPolicy&&(t.referrerPolicy=n.referrerPolicy),de(n)&&n.sizes&&(t.sizes=n.sizes),i&&"srcset"in t?t.srcset=r:t.src=r;return o&&t.decode?t.decode().then((function(){return r})):new Promise((function(e,n){t.onload=function(){return e(r)},t.onerror=function(){return n(null)}}))}},{key:"setErrorImage",value:function(e,t){var n=t.element,i=t.useSrcset,r=t.errorImagePath;je(n,r,i),ge(n,"ng-failed-lazyloaded")}},{key:"setLoadedImage",value:function(e,t){var n=t.element,i=t.useSrcset;Me(n,e,i)}},{key:"isDisabled",value:function(){return Object(i.J)(this.platformId)&&!this.isBot()}},{key:"skipLazyLoading",value:function(){return this.isBot()}},{key:"isBot",value:function(){var e;return!!(null===(e=this.navigator)||void 0===e?void 0:e.userAgent)&&/googlebot|bingbot|yandex|baiduspider|facebookexternalhit|twitterbot|rogerbot|linkedinbot|embedly|quora\ link\ preview|showyoubot|outbrain|pinterest\/0\.|pinterestbot|slackbot|vkShare|W3C_Validator|whatsapp|duckduckbot/i.test(this.navigator.userAgent)}}]),n}(function(){function e(){_classCallCheck(this,e),this.navigator="undefined"!=typeof window?window.navigator:void 0}return _createClass(e,[{key:"setPlatformId",value:function(e){this.platformId=e}},{key:"onDestroy",value:function(e){}},{key:"onAttributeChange",value:function(e){}}]),e}()))).\u0275fac=function(e){return Ee(e||ke)},ke.\u0275prov=w.Fb({token:ke,factory:ke.\u0275fac}),ke),Ae=((Pe=xe=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"forRoot",value:function(e,t){return{ngModule:xe,providers:[{provide:"LazyLoadImageHooks",useFactory:function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return e?_construct(e,n):new ze},deps:t}]}}}]),e}()).\u0275mod=w.Hb({type:Pe}),Pe.\u0275inj=w.Gb({factory:function(e){return new(e||Pe)},providers:[{provide:"LazyLoadImageHooks",useClass:ze}]}),Pe),Ee=w.Ob(ze),Te=((Ie=function e(){_classCallCheck(this,e)}).\u0275mod=w.Hb({type:Ie}),Ie.\u0275inj=w.Gb({factory:function(e){return new(e||Ie)},imports:[[i.c,r.e,o.zb,E,Ae]]}),Ie);w.fc(c.b,[i.q,i.r,i.s,i.t,i.A,i.w,i.x,i.y,i.z,i.u,i.v,r.w,r.n,r.v,r.c,r.o,r.r,r.a,r.t,r.u,r.q,r.i,r.j,r.s,r.g,r.f,r.p,r.b,r.d,r.l,r.m,r.k,o.c,o.d,o.e,o.g,o.h,o.i,o.j,o.k,o.l,o.m,o.n,o.o,o.p,o.q,o.r,o.s,o.t,o.u,o.v,o.w,o.x,o.y,o.z,o.A,o.B,o.C,o.D,o.E,o.F,o.G,o.H,o.I,o.J,o.K,o.L,o.M,o.N,o.O,o.P,o.Q,o.R,o.S,o.T,o.U,o.V,o.W,o.X,o.Y,o.Z,o.ab,o.bb,o.cb,o.eb,o.fb,o.gb,o.hb,o.ib,o.jb,o.kb,o.lb,o.mb,o.nb,o.ob,o.pb,o.qb,o.sb,o.tb,o.ub,o.wb,o.xb,o.vb,o.rb,o.b,o.Cb,o.Eb,o.Gb,o.Hb,o.db,o.f,o.Bb,o.Fb,o.Jb,o.Kb,o.Lb,o.yb,s.l,s.h,s.j,s.i,s.n,Le,z,c.b,T.a,B,F,G],[i.b,i.G,i.p,i.k,i.E,i.g,i.C,i.F,i.d,i.f,i.i,i.j,i.l])}}]);