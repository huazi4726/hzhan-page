(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{"99Un":function(e,t,i){"use strict";i.r(t),i.d(t,"HomePageModule",(function(){return ze}));var s=i("ofXK"),n=i("3Pt+"),r=i("TEn/"),o=i("tyNb"),c=i("66A4"),a=i("R0Ic"),b=i("nYR2"),l=i("128B"),h=i("lJxs"),u=i("xbPD"),d=i("XNiG"),m=i("l7GE"),g=i("ZUHj");class f{constructor(e,t){this.notifier=e,this.source=t}call(e,t){return t.subscribe(new p(e,this.notifier,this.source))}}class p extends m.a{constructor(e,t,i){super(e),this.notifier=t,this.source=i}error(e){if(!this.isStopped){let i=this.errors,s=this.retries,n=this.retriesSubscription;if(s)this.errors=null,this.retriesSubscription=null;else{i=new d.a;try{const{notifier:e}=this;s=e(i)}catch(t){return super.error(t)}n=Object(g.a)(this,s)}this._unsubscribeAndRecycle(),this.errors=i,this.retries=s,this.retriesSubscription=n,i.next(e)}}_unsubscribe(){const{errors:e,retriesSubscription:t}=this;e&&(e.unsubscribe(),this.errors=null),t&&(t.unsubscribe(),this.retriesSubscription=null),this.retries=null}notifyNext(e,t,i,s,n){const{_unsubscribe:r}=this;this._unsubscribe=null,this._unsubscribeAndRecycle(),this._unsubscribe=r,this.source.subscribe(this)}}var w=i("pLZG"),v=i("3E0/"),y=i("Cfvw"),O=i("fXoL"),x=i("tudd"),I=i("Witw");const C=["buttomScroll"];function M(e,t){1&e&&(O.Mb(0,"ion-item"),O.Mb(1,"ion-thumbnail",13),O.Kb(2,"ion-skeleton-text",14),O.Lb(),O.Mb(3,"ion-label"),O.Mb(4,"h3"),O.Kb(5,"ion-skeleton-text",15),O.Lb(),O.Mb(6,"p"),O.Kb(7,"ion-skeleton-text",16),O.Lb(),O.Mb(8,"p"),O.Kb(9,"ion-skeleton-text",17),O.Lb(),O.Lb(),O.Lb())}const S=function(){return[1,1,1,1,1,1,1,1,1]};function L(e,t){1&e&&(O.Mb(0,"ion-col",11),O.ic(1,M,10,0,"ion-item",12),O.Lb()),2&e&&(O.zb(1),O.Zb("ngForOf",O.ac(1,S)))}function j(e,t){if(1&e&&(O.Mb(0,"ion-col",11),O.Kb(1,"app-hitem",18),O.Lb()),2&e){const e=t.$implicit;O.zb(1),O.Zb("hitem",e)}}let z=(()=>{class e{constructor(e,t){this.sys=e,this.uiService=t,this.showTopAlert=!1,this.topAlertText="",this.hitemList=new Array}ngOnInit(){this.loadHitem()}updateHitem(e,t=!0){null!=e&&(this.topAlertText=0==e.length?"\u6ca1\u6709\u66f4\u65b0":`\u66f4\u65b0${e.length}\u6761`,this.showTopAlert=!0,e.forEach(e=>{const i=new c.a(this.sys);console.debug(i.id),Object.assign(i,e),t?this.hitemList.push(i):this.hitemList.splice(0,0,i)}),setTimeout(()=>{this.showTopAlert=!1},1500))}pullHitem(e){let t="",i=0;this.hitemList.forEach((e,t)=>{i=e.ctime>i?e.ctime:i}),t=`?ctime=${i}`,this.sys.fetch(`/hweb/timeline/pull/${t}`).pipe(Object(b.a)(()=>{e.target.complete()})).subscribe({next:e=>{this.updateHitem(e,!1)}})}loadHitem(e){Object(y.a)(this.hitemList).pipe(Object(l.a)((e,t)=>((e,t)=>e.ctime>t.ctime?e.ctime:t.ctime)(e,t)<0?e:t),Object(h.a)(e=>e.ctime),Object(u.a)(0)).subscribe(e=>{var t;this.sys.fetch(`/hweb/timeline/push/?ctime=${e}`).pipe(Object(b.a)(()=>{this.buttomScroll.complete()}),(t=e=>e.pipe(Object(w.a)(e=>0==this.hitemList.length),Object(v.a)(2e4)),e=>e.lift(new f(t,e)))).subscribe({next:e=>{this.updateHitem(e)}})})}}return e.\u0275fac=function(t){return new(t||e)(O.Jb(x.a),O.Jb(I.a))},e.\u0275cmp=O.Db({type:e,selectors:[["app-home"]],viewQuery:function(e,t){var i;1&e&&O.hc(C,!0),2&e&&O.bc(i=O.Vb())&&(t.buttomScroll=i.first)},decls:17,vars:4,consts:[[1,"main-content"],["content",""],["slot","fixed","pullMin","100",3,"ionRefresh"],["refresher",""],[1,"refresh-alert"],[1,"info-card","bg-danger"],["size","12",4,"ngIf"],["size","12",4,"ngFor","ngForOf"],["threshold","20px",3,"ionInfinite"],["buttomScroll",""],[1,"bottom-line"],["size","12"],[4,"ngFor","ngForOf"],["slot","start"],["animated",""],["animated","",2,"width","50%"],["animated","",2,"width","90%"],["animated","",2,"width","60%"],[3,"hitem"]],template:function(e,t){1&e&&(O.Mb(0,"ion-content",0,1),O.Mb(2,"ion-refresher",2,3),O.Ub("ionRefresh",(function(e){return t.pullHitem(e)})),O.Kb(4,"ion-refresher-content"),O.Lb(),O.Mb(5,"div",4),O.jc(6),O.Lb(),O.Mb(7,"div",5),O.jc(8," \u672c\u7ad9\u5efa\u8bae\u4f7f\u7528 Chrome(\u8c37\u6b4c\u6d4f\u89c8\u5668),Safari(\u82f9\u679c\u6d4f\u89c8\u5668),Firefox(\u706b\u72d0\u6d4f\u89c8\u5668) \u6d4f\u89c8\uff0c\u4ee5\u83b7\u5f97\u6700\u597d\u7684\u4f53\u9a8c\u3002 "),O.Lb(),O.Mb(9,"ion-grid"),O.Mb(10,"ion-row"),O.ic(11,L,2,2,"ion-col",6),O.ic(12,j,2,1,"ion-col",7),O.Lb(),O.Lb(),O.Mb(13,"ion-infinite-scroll",8,9),O.Ub("ionInfinite",(function(e){return t.loadHitem(e)})),O.Mb(15,"div",10),O.jc(16,"\u4f60\u5df2\u89e6\u53ca\u5230\u6211\u7684\u5e95\u7ebf"),O.Lb(),O.Lb(),O.Lb()),2&e&&(O.zb(5),O.Zb("@topAlert",t.showTopAlert?"show":"dismiss"),O.zb(1),O.kc(t.topAlertText),O.zb(5),O.Zb("ngIf",0==t.hitemList.length),O.zb(1),O.Zb("ngForOf",t.hitemList))},directives:[r.s,r.Y,r.Z,r.y,r.eb,s.t,s.s,r.C,r.r,r.F,r.ub,r.kb,r.L,c.b],styles:[".main-content[_ngcontent-%COMP%]{--ion-background-color:#efefef}.h-message[_ngcontent-%COMP%]{background-color:#00adff;color:#fff;font-weight:600;padding:15px}ion-progress-bar[_ngcontent-%COMP%]{margin:10px 0}.refresh-alert[_ngcontent-%COMP%]{position:fixed;background-color:orange;color:#fff;font-weight:500;padding:5px;z-index:10}.bottom-line[_ngcontent-%COMP%], .refresh-alert[_ngcontent-%COMP%]{text-align:center;width:100%}.bottom-line[_ngcontent-%COMP%]{padding-bottom:15px;color:grey;font-weight:700}.info-card[_ngcontent-%COMP%]{margin:10px;padding:10px;color:#fff;font-weight:700;font-size:14px}.bg-danger[_ngcontent-%COMP%]{background-color:var(--ion-color-danger)}.bg-success[_ngcontent-%COMP%]{background-color:var(--ion-color-primary)}"],data:{animation:[Object(a.j)("topAlert",[Object(a.g)("show",Object(a.h)({opacity:1})),Object(a.g)("dismiss",Object(a.h)({opacity:0})),Object(a.i)("show=>dismiss",[Object(a.e)("0.2s")]),Object(a.i)("dismiss=>show",[Object(a.e)("0.2s")])])]}}),e})();const A=[{path:"",component:z}];let _=(()=>{class e{}return e.\u0275mod=O.Hb({type:e}),e.\u0275inj=O.Gb({factory:function(t){return new(t||e)},imports:[[o.k.forChild(A)],o.k]}),e})();var P=i("G4NA"),k=i("GU7r");const E=["articleContent"];let T=(()=>{class e{constructor(e,t,i){this.observer=e,this.elementRef=t,this.ui=i}ngOnInit(){this.observer.observe(this.articleContent.nativeElement).subscribe(e=>{this.elementRef.nativeElement.querySelectorAll("img.h-img").forEach((e,t)=>{let i=this.ui.getUrlFromSource(e.alt);e.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAIAAACQd1PeAAAADElEQVR4nGP48P8DAAXCAuBwCbJVAAAAAElFTkSuQmCC",e.removeAttribute("alt"),e.style.width="100%",e.style.height="30px",this.ui.onInScreen(e).subscribe({complete:()=>{e.src=i,e.style.height="100%",e.style.border="1px solid #eeeeee"}})})})}ngAfterViewInit(){}}return e.\u0275fac=function(t){return new(t||e)(O.Jb(k.a),O.Jb(O.l),O.Jb(I.a))},e.\u0275cmp=O.Db({type:e,selectors:[["app-article"]],viewQuery:function(e,t){var i;1&e&&O.hc(E,!0),2&e&&O.bc(i=O.Vb())&&(t.articleContent=i.first)},inputs:{content:"content"},decls:2,vars:1,consts:[[1,"article",3,"innerHTML"],["articleContent",""]],template:function(e,t){1&e&&O.Kb(0,"div",0,1),2&e&&O.Zb("innerHTML",t.content,O.dc)},styles:[".article[_ngcontent-%COMP%]{margin:10px;padding:10px;font-size:14px;border:1px solid #e1e1e1}"]}),e})();var N=i("qubv");function F(e,t){if(1&e&&(O.Mb(0,"ion-col",2),O.Kb(1,"ion-img",3),O.Lb()),2&e){const e=t.$implicit,i=O.Wb();O.Zb("size",i.colSize),O.zb(1),O.Zb("src",i.getImgUrl(e))}}let J=(()=>{class e{constructor(e,t,i,s,n){this.elementRef=e,this.ui=t,this.platform=i,this.router=s,this.playService=n,this.isPreview=!0,this.colSize=3,this.thumbCount=4}ngOnInit(){var e;this.thumbCount=this.platform.is("desktop")?6:(e=[1,2,3])[Math.floor(Math.random()*e.length)],window.innerWidth>600&&(this.thumbCount=4),this.colSize=12/this.thumbCount,this.thumbs=this.hitem.imgs.slice(0,this.thumbCount)}ngAfterViewInit(){}viewArticle(){this.playService.pageHitem$.next(this.hitem),this.router.navigate(["hitem",this.hitem.id])}getImgUrl(e){let t="mini";return 1==this.thumbCount&&(t=void 0),this.ui.getUrlFromSource(e,t)}}return e.\u0275fac=function(t){return new(t||e)(O.Jb(O.l),O.Jb(I.a),O.Jb(r.Db),O.Jb(o.g),O.Jb(N.a))},e.\u0275cmp=O.Db({type:e,selectors:[["app-article-preview"]],viewQuery:function(e,t){var i;1&e&&O.mc(r.B,!0),2&e&&O.bc(i=O.Vb())&&(t.ionImgs=i)},inputs:{hitem:"hitem"},decls:3,vars:1,consts:[[3,"click"],["class","thumb",3,"size",4,"ngFor","ngForOf"],[1,"thumb",3,"size"],[3,"src"]],template:function(e,t){1&e&&(O.Mb(0,"ion-grid"),O.Mb(1,"ion-row",0),O.Ub("click",(function(){return t.viewArticle()})),O.ic(2,F,2,2,"ion-col",1),O.Lb(),O.Lb()),2&e&&(O.zb(2),O.Zb("ngForOf",t.thumbs))},directives:[r.y,r.eb,s.s,r.r,r.B],styles:["ion-row[_ngcontent-%COMP%]{background-color:#eee}.thumb[_ngcontent-%COMP%]{margin:auto}"]}),e})();function $(e,t){if(1&e&&O.Kb(0,"img",12),2&e){const e=t.$implicit,i=O.Wb(2);O.Zb("src",i.getImgUrl(e),O.ec)}}function H(e,t){if(1&e&&(O.Mb(0,"div"),O.Mb(1,"div",10),O.ic(2,$,1,1,"img",11),O.Lb(),O.Lb()),2&e){const e=O.Wb();O.zb(2),O.Zb("ngForOf",e.hitem.photos)}}function Z(e,t){if(1&e&&(O.Mb(0,"div",13),O.Kb(1,"app-video",14),O.Lb()),2&e){const e=O.Wb();O.zb(1),O.Zb("src",e.getVideoSrc())("thumbSrc",e.getPoster())}}let B=(()=>{class e{constructor(e){this.sys=e}ngOnInit(){}getAvatar(){return`${this.sys.staticPrefix}/tweet/avatar-${this.hitem.username}.jpg`}getImgUrl(e){return`${this.sys.staticPrefix}${e}`}getPoster(){return`${this.sys.staticPrefix}/${this.hitem.thumb}`}getVideoSrc(){return`${this.sys.staticPrefix}/hls/${this.hitem.src}`}}return e.\u0275fac=function(t){return new(t||e)(O.Jb(x.a))},e.\u0275cmp=O.Db({type:e,selectors:[["app-tweet"]],inputs:{hitem:"hitem"},decls:16,vars:6,consts:[["size","12"],[1,"tw"],[1,"tw-head"],["alt","",3,"src"],[1,"tw-main"],[1,"tweet-name"],[1,"username"],[1,"tweet-text"],[4,"ngIf"],["class","tw-video",4,"ngIf"],[1,"tw-img"],[3,"src",4,"ngFor","ngForOf"],[3,"src"],[1,"tw-video"],[3,"src","thumbSrc"]],template:function(e,t){1&e&&(O.Mb(0,"ion-grid"),O.Mb(1,"ion-row"),O.Mb(2,"ion-col",0),O.Mb(3,"div",1),O.Mb(4,"div",2),O.Kb(5,"img",3),O.Lb(),O.Mb(6,"div",4),O.Mb(7,"div",5),O.jc(8),O.Mb(9,"span",6),O.jc(10),O.Lb(),O.Lb(),O.Mb(11,"div"),O.Mb(12,"p",7),O.jc(13),O.Lb(),O.Lb(),O.ic(14,H,3,1,"div",8),O.ic(15,Z,2,2,"div",9),O.Lb(),O.Lb(),O.Lb(),O.Lb(),O.Lb()),2&e&&(O.zb(5),O.Zb("src",t.getAvatar(),O.ec),O.zb(3),O.lc("",t.hitem.name," "),O.zb(2),O.lc("@",t.hitem.username,""),O.zb(3),O.kc(t.hitem.tweet),O.zb(1),O.Zb("ngIf",t.hitem.photos),O.zb(1),O.Zb("ngIf",t.hitem.src))},directives:[r.y,r.eb,r.r,s.t,s.s,P.a],styles:[".tw[_ngcontent-%COMP%]{display:flex;flex-direction:row;padding:5px}.tw-head[_ngcontent-%COMP%]{margin:5px 0;flex-basis:55px;flex-grow:0}.tw-head[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:45px;border-radius:50%}.tw-main[_ngcontent-%COMP%]{flex-basis:0px;flex-grow:1;padding-right:5px}.tw-main[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border:1px solid #e1e1e1;border-radius:10px}.tweet-name[_ngcontent-%COMP%]{font-size:15px;font-weight:700}.tweet-name[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:var(--ion-color-medium)}.tweet-text[_ngcontent-%COMP%]{font-weight:400;font-size:15px;margin:0 0 15px}"]}),e})();var V=i("LRne"),W=i("3N8a");class K extends W.a{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,i=0){return null!==i&&i>0||null===i&&this.delay>0?super.requestAsyncId(e,t,i):e.flush(this)}}var D=i("IjjT");class G extends D.a{}const R=new G(K);var U=i("quSY"),q=i("7o/Q"),Y=i("WMd4");class Q extends q.a{constructor(e,t,i=0){super(e),this.scheduler=t,this.delay=i}static dispatch(e){const{notification:t,destination:i}=e;t.observe(i),this.unsubscribe()}scheduleMessage(e){this.destination.add(this.scheduler.schedule(Q.dispatch,this.delay,new X(e,this.destination)))}_next(e){this.scheduleMessage(Y.a.createNext(e))}_error(e){this.scheduleMessage(Y.a.createError(e)),this.unsubscribe()}_complete(){this.scheduleMessage(Y.a.createComplete()),this.unsubscribe()}}class X{constructor(e,t){this.notification=e,this.destination=t}}var ee=i("9ppp"),te=i("Ylt2");class ie extends d.a{constructor(e=Number.POSITIVE_INFINITY,t=Number.POSITIVE_INFINITY,i){super(),this.scheduler=i,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=e<1?1:e,this._windowTime=t<1?1:t,t===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(e){const t=this._events;t.push(e),t.length>this._bufferSize&&t.shift(),super.next(e)}nextTimeWindow(e){this._events.push(new se(this._getNow(),e)),this._trimBufferThenGetEvents(),super.next(e)}_subscribe(e){const t=this._infiniteTimeWindow,i=t?this._events:this._trimBufferThenGetEvents(),s=this.scheduler,n=i.length;let r;if(this.closed)throw new ee.a;if(this.isStopped||this.hasError?r=U.a.EMPTY:(this.observers.push(e),r=new te.a(this,e)),s&&e.add(e=new Q(e,s)),t)for(let o=0;o<n&&!e.closed;o++)e.next(i[o]);else for(let o=0;o<n&&!e.closed;o++)e.next(i[o].value);return this.hasError?e.error(this.thrownError):this.isStopped&&e.complete(),r}_getNow(){return(this.scheduler||R).now()}_trimBufferThenGetEvents(){const e=this._getNow(),t=this._bufferSize,i=this._windowTime,s=this._events,n=s.length;let r=0;for(;r<n&&!(e-s[r].time<i);)r++;return n>t&&(r=Math.max(r,n-t)),r>0&&s.splice(0,r),s}}class se{constructor(e,t){this.time=e,this.value=t}}var ne=i("5yfJ"),re=i("HDdC"),oe=(i("EY2u"),i("vkgz")),ce=i("IzEk"),ae=i("5+tZ"),be=i("JIr8"),le=i("eIep");function he(e,t){e.className=e.className.replace(t,"")}function ue(e,t){e.className.includes(t)||(e.className+=` ${t}`)}function de(e){return Boolean(e.parentElement&&"picture"===e.parentElement.nodeName.toLowerCase())}function me(e){return"img"===e.nodeName.toLowerCase()}function ge(e,t,i){return me(e)?i&&"srcset"in e?e.srcset=t:e.src=t:e.style.backgroundImage=`url('${t}')`,e}function fe(e){return t=>{const i=t.parentElement.getElementsByTagName("source");for(let s=0;s<i.length;s++){const t=i[s].getAttribute(e);t&&("srcset"in i[s]?i[s].srcset=t:i[s].src=t)}}}i("JX91"),i("D0XW"),i("w1tV");const pe=fe("defaultImage"),we=fe("lazyLoad"),ve=fe("errorImage");function ye(e){return(t,i,s)=>{me(t)&&de(t)&&e(t),i&&ge(t,i,s)}}const Oe=ye(pe),xe=ye(we),Ie=ye(ve);let Ce=(()=>{let e=class{constructor(e,t,i,s){this.onStateChange=new O.n,this.elementRef=e,this.ngZone=t,this.propertyChanges$=new ie,this.hooks=s,s.setPlatformId(i),this.uid=Math.random().toString(36).substr(2,9)}ngOnChanges(){!0!==this.debug||this.debugSubscription||(this.debugSubscription=this.onStateChange.subscribe(e=>console.log(e))),this.propertyChanges$.next({element:this.elementRef.nativeElement,imagePath:this.lazyImage,defaultImagePath:this.defaultImage,errorImagePath:this.errorImage,useSrcset:this.useSrcset,offset:this.offset?0|this.offset:0,scrollContainer:this.scrollTarget,customObservable:this.customObservable,decode:this.decode,onStateChange:this.onStateChange,id:this.uid})}ngAfterContentInit(){if(this.hooks.isDisabled())return null;this.ngZone.runOutsideAngular(()=>{this.loadSubscription=this.propertyChanges$.pipe(Object(oe.a)(e=>this.hooks.onAttributeChange(e)),Object(oe.a)(e=>e.onStateChange.emit({reason:"setup"})),Object(oe.a)(e=>this.hooks.setup(e)),Object(le.a)(e=>e.imagePath?this.hooks.getObservable(e).pipe(function(e,t){return i=>i.pipe(Object(oe.a)(e=>t.onStateChange.emit({reason:"observer-emit",data:e})),Object(w.a)(i=>e.isVisible(i,t)),Object(ce.a)(1),Object(oe.a)(()=>t.onStateChange.emit({reason:"start-loading"})),Object(ae.a)(()=>e.loadImage(t)),Object(oe.a)(()=>t.onStateChange.emit({reason:"mount-image"})),Object(oe.a)(i=>e.setLoadedImage(i,t)),Object(oe.a)(()=>t.onStateChange.emit({reason:"loading-succeeded"})),Object(h.a)(()=>!0),Object(be.a)(i=>(t.onStateChange.emit({reason:"loading-failed",data:i}),e.setErrorImage(i,t),Object(V.a)(!1))),Object(oe.a)(()=>{t.onStateChange.emit({reason:"finally"}),e.finally(t)}))}(this.hooks,e)):Object(ne.b)())).subscribe({next:()=>null})})}ngOnDestroy(){var e,t;this.propertyChanges$.pipe(Object(ce.a)(1)).subscribe({next:e=>this.hooks.onDestroy(e)}).unsubscribe(),null===(e=this.loadSubscription)||void 0===e||e.unsubscribe(),null===(t=this.debugSubscription)||void 0===t||t.unsubscribe()}};return e.\u0275fac=function(t){return new(t||e)(O.Jb(O.l),O.Jb(O.z),O.Jb(O.B),O.Jb("LazyLoadImageHooks"))},e.\u0275dir=O.Eb({type:e,selectors:[["","lazyLoad",""]],inputs:{lazyImage:["lazyLoad","lazyImage"],defaultImage:"defaultImage",errorImage:"errorImage",scrollTarget:"scrollTarget",customObservable:"customObservable",offset:"offset",useSrcset:"useSrcset",decode:"decode",debug:"debug"},outputs:{onStateChange:"onStateChange"},features:[O.xb]}),e})(),Me=(()=>{class e extends class extends class{constructor(){this.navigator="undefined"!=typeof window?window.navigator:void 0}setPlatformId(e){this.platformId=e}onDestroy(e){}onAttributeChange(e){}}{setup(e){var t;Oe(e.element,e.defaultImagePath,e.useSrcset),ue(e.element,"ng-lazyloading"),(t=e.element).className&&t.className.includes("ng-lazyloaded")&&he(e.element,"ng-lazyloaded")}finally(e){ue(e.element,"ng-lazyloaded"),he(e.element,"ng-lazyloading")}loadImage(e){if(this.skipLazyLoading())return[e.imagePath];const{element:t,useSrcset:i,imagePath:s,decode:n}=e;let r;if(me(t)&&de(t)){const e=t.parentNode.cloneNode(!0);r=e.getElementsByTagName("img")[0],we(r),ge(r,s,i)}else r=new Image,me(t)&&t.referrerPolicy&&(r.referrerPolicy=t.referrerPolicy),me(t)&&t.sizes&&(r.sizes=t.sizes),i&&"srcset"in r?r.srcset=s:r.src=s;return n&&r.decode?r.decode().then(()=>s):new Promise((e,t)=>{r.onload=()=>e(s),r.onerror=()=>t(null)})}setErrorImage(e,t){const{element:i,useSrcset:s,errorImagePath:n}=t;Ie(i,n,s),ue(i,"ng-failed-lazyloaded")}setLoadedImage(e,t){const{element:i,useSrcset:s}=t;xe(i,e,s)}isDisabled(){return Object(s.J)(this.platformId)&&!this.isBot()}skipLazyLoading(){return this.isBot()}isBot(){var e;return!!(null===(e=this.navigator)||void 0===e?void 0:e.userAgent)&&/googlebot|bingbot|yandex|baiduspider|facebookexternalhit|twitterbot|rogerbot|linkedinbot|embedly|quora\ link\ preview|showyoubot|outbrain|pinterest\/0\.|pinterestbot|slackbot|vkShare|W3C_Validator|whatsapp|duckduckbot/i.test(this.navigator.userAgent)}}{constructor(){super(...arguments),this.observers=new WeakMap,this.intersectionSubject=new d.a,this.uniqKey={}}getObservable(e){if(this.skipLazyLoading())return Object(V.a)({isIntersecting:!0});if(e.customObservable)return e.customObservable;const t=e.scrollContainer||this.uniqKey,i={root:e.scrollContainer||null};e.offset&&(i.rootMargin=`${e.offset}px`);let s=this.observers.get(t);return s||(s=new IntersectionObserver(e=>this.loadingCallback(e),i),this.observers.set(t,s)),s.observe(e.element),re.a.create(t=>{const i=this.intersectionSubject.pipe(Object(w.a)(t=>t.target===e.element)).subscribe(t);return()=>{i.unsubscribe(),s.unobserve(e.element)}})}isVisible(e){return e.isIntersecting}loadingCallback(e){e.forEach(e=>this.intersectionSubject.next(e))}}return e.\u0275fac=function(t){return je(t||e)},e.\u0275prov=O.Fb({token:e,factory:e.\u0275fac}),e})();var Se;let Le=(()=>{let e=Se=class{static forRoot(e,t){return{ngModule:Se,providers:[{provide:"LazyLoadImageHooks",useFactory:(...t)=>e?new e(...t):new Me,deps:t}]}}};return e.\u0275mod=O.Hb({type:e}),e.\u0275inj=O.Gb({factory:function(t){return new(t||e)},providers:[{provide:"LazyLoadImageHooks",useClass:Me}]}),e})();const je=O.Ob(Me);let ze=(()=>{class e{}return e.\u0275mod=O.Hb({type:e}),e.\u0275inj=O.Gb({factory:function(t){return new(t||e)},imports:[[s.c,n.e,r.zb,_,Le]]}),e})();O.fc(c.b,[s.q,s.r,s.s,s.t,s.A,s.w,s.x,s.y,s.z,s.u,s.v,n.w,n.n,n.v,n.c,n.o,n.r,n.a,n.t,n.u,n.q,n.i,n.j,n.s,n.g,n.f,n.p,n.b,n.d,n.l,n.m,n.k,r.c,r.d,r.e,r.g,r.h,r.i,r.j,r.k,r.l,r.m,r.n,r.o,r.p,r.q,r.r,r.s,r.t,r.u,r.v,r.w,r.x,r.y,r.z,r.A,r.B,r.C,r.D,r.E,r.F,r.G,r.H,r.I,r.J,r.K,r.L,r.M,r.N,r.O,r.P,r.Q,r.R,r.S,r.T,r.U,r.V,r.W,r.X,r.Y,r.Z,r.ab,r.bb,r.cb,r.eb,r.fb,r.gb,r.hb,r.ib,r.jb,r.kb,r.lb,r.mb,r.nb,r.ob,r.pb,r.qb,r.sb,r.tb,r.ub,r.wb,r.xb,r.vb,r.rb,r.b,r.Cb,r.Eb,r.Gb,r.Hb,r.db,r.f,r.Bb,r.Fb,r.Jb,r.Kb,r.Lb,r.yb,o.l,o.h,o.j,o.i,o.n,Ce,z,c.b,P.a,J,T,B],[s.b,s.G,s.p,s.k,s.E,s.g,s.C,s.F,s.d,s.f,s.i,s.j,s.l])}}]);